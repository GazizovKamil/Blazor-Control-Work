@page "/profile"

<PageTitle>Profile</PageTitle>

@using Blazor_Control_Work.Data
@using EditorUnit

@inject NavigationManager NavigationManager
@inject SingletonService SingletonService

<section class="vh-100" style="background-color: #eee;">
    <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-md-12 col-xl-4">
                <div class="card" style="border-radius: 15px;">
                    <div class="card-body text-center">
                        @if (SingletonService.user != null)
                        {
                            <h4 class="mb-2">@SingletonService.user.Name  @SingletonService.user.Surname</h4>
                            if (SingletonService.user.Email != null && SingletonService.user.PhoneNumber != null && SingletonService.user.Dept != null && SingletonService.user.Post != null)
                            {
                                <h4 class="mb-2">Email: @SingletonService.user.Email</h4>
                                <h4 class="mb-2">PhoneNumber: @SingletonService.user.PhoneNumber</h4>
                                <h4 class="mb-2">Dept: @SingletonService.user.Dept</h4>
                                <h4 class="mb-2">Post: @SingletonService.user.Post</h4>
                            }
                            <p class="text-muted mb-4">
                            <a href="#!">@SingletonService.user.Email</a>
                            </p>
                            <button type="button" @onclick="Output" class="btn btn-primary btn-rounded btn-lg">
                                Output
                            </button>
                            <button type="button" @onclick="Edit" class="btn btn-primary btn-rounded btn-lg">
                                Edit
                            </button>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@code {
    string strException;
    string srcPath;

    protected override void OnInitialized()
    {

    }

    public void Output()
    {
        User user = null;
        SingletonService.SetUser(user);
        NavigationManager.NavigateTo("/");
    }

    public void Edit()
    {
        NavigationManager.NavigateTo("/edit");
    }
}
